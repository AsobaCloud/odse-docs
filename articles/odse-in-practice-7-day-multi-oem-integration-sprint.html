<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unifying Three Inverter Feeds in a Week: A Day-by-Day Walkthrough - ODS-E Blog</title>
  <meta name="description" content="A worked example showing how to normalize Huawei, Enphase, and Solarman telemetry into one ODSE pipeline in a single sprint — what works, what doesn't, and what to do differently.">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Open Data Schema for Energy">
  <meta property="og:title" content="Unifying Three Inverter Feeds in a Week: A Day-by-Day Walkthrough - ODS-E Blog">
  <meta property="og:description" content="A worked example showing how to normalize Huawei, Enphase, and Solarman telemetry into one ODSE pipeline in a single sprint — what works, what doesn't, and what to do differently.">
  <meta property="og:image" content="https://opendataschema.energy/assets/images/brand/logo.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Unifying Three Inverter Feeds in a Week: A Day-by-Day Walkthrough - ODS-E Blog">
  <meta name="twitter:description" content="A worked example showing how to normalize Huawei, Enphase, and Solarman telemetry into one ODSE pipeline in a single sprint — what works, what doesn't, and what to do differently.">
  <meta name="twitter:image" content="https://opendataschema.energy/assets/images/brand/logo.png">
  <link rel="icon" type="image/x-icon" href="../favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="../Artboard-7.png">
  <link rel="apple-touch-icon" sizes="180x180" href="../Artboard-7.png">
  <link rel="stylesheet" href="../includes/common.css">
  <style>
    :root {
      --primary-black: #000000;
      --primary-blue: #455BF1;
      --accent-blue: #3748c8;
      --text-dark: #333;
      --text-light: #4D4D4D;
      --white: #FFFFFF;
      --border-grey: #E0E0E0;
      --neutral-grey: #F4F4F4;
      --accent-red: #E20419;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'DM Sans', Helvetica, Arial, sans-serif;
      background-color: var(--white);
      line-height: 1.75;
      color: var(--text-dark);
    }

    .header-bar {
      background-color: var(--primary-black);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 70px;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 90px;
    }

    .branding { display: flex; align-items: center; }

    .branding img { width: 50px; height: 50px; object-fit: contain; }

    .site-title {
      color: var(--white);
      font-size: 20px;
      font-weight: 700;
      margin-left: 15px;
      white-space: nowrap;
    }

    .top-links { display: flex; gap: 15px; }

    .top-links a {
      color: var(--white);
      text-decoration: none;
      font: normal 12px / 16px 'DM Sans', Helvetica, Arial, sans-serif;
      padding: 5px;
      transition: color 0.3s ease;
    }

    .top-links a:hover { color: var(--primary-blue); }

    .article-container {
      max-width: 920px;
      margin: 0 auto;
      padding: 120px 40px 80px;
    }

    .article-header {
      margin-bottom: 48px;
      text-align: center;
      border-bottom: 1px solid var(--border-grey);
      padding-bottom: 28px;
    }

    .article-type {
      display: inline-block;
      padding: 8px 16px;
      background: var(--accent-red);
      color: var(--white);
      font-size: 0.8rem;
      font-weight: 600;
      border-radius: 20px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 20px;
    }

    .article-title {
      font-size: 2.6rem;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 14px;
      line-height: 1.2;
    }

    .article-excerpt {
      font-size: 1.15rem;
      color: var(--text-light);
      margin-bottom: 16px;
      line-height: 1.5;
    }

    .article-meta {
      font-size: 0.98rem;
      color: var(--primary-blue);
      font-weight: 600;
    }

    .article-content h2 {
      font-size: 1.8rem;
      margin: 36px 0 14px;
      line-height: 1.3;
    }

    .article-content h3 {
      font-size: 1.35rem;
      margin: 24px 0 10px;
      line-height: 1.3;
    }

    .article-content p { margin-bottom: 16px; }

    .article-content ul {
      margin: 0 0 16px 22px;
    }

    .article-content li { margin-bottom: 8px; }

    pre {
      background: var(--neutral-grey);
      border-radius: 8px;
      padding: 16px;
      overflow-x: auto;
      margin: 14px 0 20px;
      line-height: 1.5;
    }

    code {
      font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;
      font-size: 0.95em;
    }

    .cta-box {
      border: 1px solid var(--border-grey);
      border-left: 4px solid var(--primary-blue);
      border-radius: 8px;
      padding: 16px;
      margin: 24px 0;
      background: #fafbff;
    }

    .cta-box strong { display: block; margin-bottom: 8px; }

    .back-link {
      display: inline-block;
      margin-top: 24px;
      color: var(--primary-blue);
      font-weight: 600;
      text-decoration: none;
    }

    @media (max-width: 900px) {
      .header-bar { padding: 0 16px; }
      .site-title { font-size: 18px; }
      .article-container { padding: 110px 20px 56px; }
      .article-title { font-size: 2rem; }
    }
  </style>
</head>
<body>
  <header class="header-bar">
    <div class="branding">
      <span class="site-title">Open Data Schema for Energy</span>
    </div>
    <div class="top-links">
      <a href="/docs/">Docs</a>
      <a href="https://opendataschema.energy/blog.html">Blog</a>
      <a href="https://github.com/AsobaCloud/odse">GitHub</a>
      <a href="https://asoba.co/contact-us">Contact</a>
    </div>
  </header>

  <main class="article-container">
    <header class="article-header">
      <span class="article-type">Implementation Guide</span>
      <h1 class="article-title">Unifying Three Inverter Feeds in a Week: A Day-by-Day Walkthrough</h1>
      <p class="article-excerpt">A worked example showing how to normalize Huawei, Enphase, and Solarman telemetry into one ODSE pipeline in a single sprint — what works, what doesn't, and what to do differently.</p>
    </header>

    <article class="article-content">
      <p>Consider a small portfolio: five sites across three OEMs — Huawei string inverters at two rooftop installations, Enphase microinverters at a commercial carport, and Solarman-connected panels at two ground-mount sites in the Eastern Cape. The portfolio is small enough that everyone assumes the data is fine. Then the quarterly energy report comes back with a 12% discrepancy between what the sites are producing and what the analytics show, and nobody can explain where the gap comes from.</p>
      <p>The root cause turns out to be embarrassingly mundane: Huawei exports use UTC, Enphase uses local time with no offset marker, and Solarman includes a timezone field that's wrong half the time. The pipeline is double-counting some intervals and missing others entirely. The fix: block out a week, use ODSE as the normalization layer, and get it right. Here's how that week plays out.</p>

      <h2>Day 1: Figure Out What You Actually Have</h2>
      <p>Start by inventorying every data source actually being ingested — not what the vendor docs say is available, but what's landing in the pipeline. This takes longer than expected because the Solarman integration was set up by someone who's since left, and the export format has drifted from what's documented in the wiki.</p>
      <p>For each source, write down: transport type (SFTP drop vs API pull), reporting interval, timestamp convention, and known gaps. The Huawei feed is the cleanest — 5-minute intervals, proper UTC timestamps, reliable delivery. Enphase is 15-minute intervals via API with local timestamps and no timezone indicator. Solarman is the wildcard: daily CSV dumps with a mix of interval lengths depending on the logger firmware version.</p>
      <p>The output is a simple source manifest — a shared doc the whole team can reference. Nothing fancy, but having all three sources described in one place for the first time is surprisingly clarifying.</p>

      <h2>Day 2: Get One OEM Through End-to-End</h2>
      <p>Pick the noisiest OEM first — in this case, Huawei, which covers two of the five sites and is the most business-critical. The goal is narrow: timestamp normalization, energy field mapping, and error code classification. Nothing else.</p>
      <pre><code>from odse import transform

rows = transform("huawei_export.csv", source="huawei")
print(rows[0])</code></pre>
      <p>This goes faster than expected — maybe three hours to get a clean transform running against a week of historical data. The tricky part is the error codes. Huawei uses numeric fault codes that don't map neatly to anything generic, so you'll need to make some judgment calls about which codes map to which ODSE <code>error_type</code> values. Document the mapping decisions in comments rather than trying to get them perfect on day one.</p>

      <h2>Day 3: Wire In Validation (and Actually Block on It)</h2>
      <p>This is the step that changes the most about how the pipeline operates. In many setups, validation runs as a weekly QA check — someone eyeballs a report on Fridays and flags anything weird. That means the team is routinely making operational decisions Monday through Thursday on data that hasn't been validated at all.</p>
      <p>Move validation to a gate: if records don't pass schema validation, they don't enter the analytics pipeline. Period.</p>
      <pre><code>from odse import validate

result = validate("site_a_odse.json")
print(result.is_valid)
print(result.errors)</code></pre>
      <p>The first run against the Huawei transform output flags about 4% of records — mostly null energy fields during overnight hours that had been treated as zero-generation instead of no-data. Small distinction, big impact on completeness calculations. Start tracking validation failures by class and frequency — this immediately becomes the backlog for the rest of the week.</p>

      <h2>Day 4: Bring In Enphase and Solarman</h2>
      <p>Now for the hard part. The other two OEM feeds need to produce the same ODSE output, and the temptation to build per-site special cases is real. Resist it. The whole point is one schema, not three tidy silos that happen to live in the same database.</p>
      <p>Enphase is straightforward once the timestamp issue is sorted — pin everything to UTC at the transform layer and store the original local timestamp as diagnostic context. Solarman is painful. The interval lengths vary by firmware version, and two of the CSV columns have been renamed in a firmware update that only one of the two Solarman sites has received. The fix: a small pre-processor that normalizes the column names before the ODSE transform touches them.</p>
      <p>By end of day, the output from all three OEMs can be concatenated and queried without schema exceptions. That moment — running one query across the whole portfolio for the first time — is genuinely satisfying.</p>

      <h2>Day 5: Build the Views Nobody Had Before</h2>
      <p>With unified data, build two portfolio-level views that operations teams typically ask for: a fault rollup by <code>error_type</code> across all sites, and a completeness report by site and day. In this example, the fault rollup immediately surfaces that one of the ground-mount sites has been throwing communication timeout errors every afternoon for weeks — invisible before because the Solarman error codes didn't mean anything to the team reviewing the Huawei-centric dashboard.</p>
      <p>The completeness report is even more revealing. Two sites that look fine in isolation are actually missing 8-10% of their daily intervals. The gaps are short enough that the daily energy totals look plausible, but the interval-level data is full of holes.</p>

      <h2>Day 6: Make It Survive Real Operations</h2>
      <p>Days 2 through 5 are all happy-path work. Day 6 is about what happens when the Solarman SFTP server is down for six hours, or when the Enphase API returns a 429 at 2am and the retry logic doesn't handle it, or when someone's laptop timezone changes and the local transform runs shift the offset.</p>
      <p>Add replay-safe ingestion so re-processing a batch doesn't create duplicates. Set up alerting for transform and validation failure spikes — not email alerts that everyone ignores, but a Slack message to the on-call channel with the failure class and count. And write down the fallback behavior for delayed source data, because "figure it out when it happens" is how you end up debugging at 11pm.</p>

      <h2>Day 7: Freeze It and Write It Down</h2>
      <p>Lock the ODSE contract version, document the error-code mappings, and write an internal runbook covering three things: who updates transforms when an OEM changes their export format, who triages validation failures when the alert fires, and who approves schema version updates when the contract needs to evolve.</p>
      <p>That last point matters more than it sounds. Without clear ownership, schemas drift. Someone adds a field for one site, someone else changes a mapping, and six months later you're back where you started.</p>

      <h2>Common Mistakes Along the Way</h2>
      <p>A common mistake is treating ODSE as an analytics layer — running forecasting logic inside the transform pipeline instead of keeping it downstream where it belongs. ODSE is a data interchange layer. The moment you start embedding business logic in the normalization step, you've coupled things that should be independent.</p>
      <p>Another pitfall: deferring the error taxonomy mapping until day 4, which is too late. If you don't map error codes early, you're just creating three tidy files that still can't be compared. The whole point of a shared schema is shared semantics, not shared syntax.</p>

      <h2>What This Sprint Actually Produces</h2>
      <p>The honest answer: this sprint won't solve every data problem. There will still be edge cases in the Solarman transform that need attention, and some error taxonomy mappings that aren't fully confident. But the quarterly report that kicked this off? Re-run it against the normalized pipeline and the 12% discrepancy drops to under 1%. The remaining gap is real — an inverter with degraded output that had been masked by the timestamp confusion.</p>
      <p>More importantly, there's now one place to look. When something's wrong, the team doesn't have to check three different dashboards with three different conventions. One schema, one validation gate, one completeness view. Everything built from here can trust the foundation.</p>

      <div class="cta-box">
        <strong>Next steps (OSS):</strong>
        <p>Install `odse`, run your first transform, validate one week of historical data, and open an issue for any unsupported OEM mappings.</p>
        <p><a href="/docs/get-started">Get Started</a> | <a href="/docs/schemas/overview">Schema Reference</a> | <a href="https://github.com/AsobaCloud/odse">GitHub</a></p>
      </div>

      <a class="back-link" href="/blog.html">&larr; Back to Blog</a>
    </article>
  </main>
</body>
</html>
